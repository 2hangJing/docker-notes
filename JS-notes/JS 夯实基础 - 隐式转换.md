
# JS ç±»å‹è½¬æ¢

## 1. å¼ºåˆ¶ç±»å‹è½¬æ¢

#### 1.1 `Number` `BigInt` å¼ºåˆ¶ç±»å‹è½¬æ¢
1. `Number` å¼ºåˆ¶è½¬æ¢ï¼šè§„åˆ™å‚è€ƒï¼š[Number å¼ºåˆ¶è½¬æ¢]
2. `BigInt` å¼ºåˆ¶è½¬æ¢ï¼šè§„åˆ™å‚è€ƒï¼š[BigInt å¼ºåˆ¶è½¬æ¢] **æ­¤å¤„åç»­è¡¥å……**


#### 1.2 `String` å¼ºåˆ¶è½¬æ¢
è§„åˆ™å‚è€ƒï¼š[String å¼ºåˆ¶è½¬æ¢]

**æ³¨æ„ï¼šæ¨¡æ¿å­—ç¬¦ä¸²ä¸`String.prototype.concat()` å¹¶ä¸æ˜¯**


#### 1.3 `Object` å¼ºåˆ¶è½¬æ¢
è§„åˆ™å‚è€ƒï¼š[Object å¼ºåˆ¶è½¬æ¢] **æ­¤å¤„åç»­è¡¥å……**

å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºåŸå§‹ç±»å‹æ—¶ï¼Œä¼šæŒ‰ç…§ `[Symbol.toPrimitive](hint)` => `valueOf()` => `toString()` é¡ºåºè°ƒç”¨å‡½æ•°ï¼Œå…¶ä¸­ä¹‹ä¸€è¿”å›åŸå§‹ç±»å‹å€¼ååœæ­¢ã€‚è½¬æ¢ä¸ºä¸åŒç±»å‹åŸå§‹å€¼å°±æ˜¯ç¬¬ä¸€æ­¥å‡½æ•° `hint` å‚æ•°ä¸åŒã€‚

#### 1.4 åŸå§‹å€¼å¼ºåˆ¶è½¬æ¢
**A. `[Symbol.toPrimitive]()`**
å½“å¯¹è±¡éœ€è¦è½¬åŒ–ä¸ºåŸå§‹å€¼æ—¶ä¼˜å…ˆè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¢«ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° `hint`ï¼Œè¡¨ç¤ºè¦è½¬æ¢åˆ°çš„åŸå§‹å€¼çš„é¢„æœŸç±»å‹ã€‚

åŸå§‹å€¼å¼ºåˆ¶è½¬æ¢æ—¶ `hint` ä¸º `default`ã€‚

**å‚æ•°å¯é€‰å€¼ï¼š**
1. `'number'`ï¼šé¢„æœŸè½¬åŒ–ä¸º `Number` ç±»å‹ã€‚
2. `'string'`ï¼šé¢„æœŸè½¬åŒ–ä¸º `String` ç±»å‹ã€‚
3. `'default'`ï¼š`Number` `String` éƒ½å¯ä»¥ã€‚

**æ³¨æ„ï¼š**
1. å½“å¯¹è±¡æœ‰æ­¤æ–¹æ³•æ—¶ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªåŸå§‹ç±»å‹å€¼ï¼Œå¦åˆ™æŠ¥é”™ï¼Œç¤ºä¾‹ï¼š
    ```javascript
    let obj = {
        [Symbol.toPrimitive](hint){
            return {};
        }
    };
    +obj;   // Uncaught TypeError: Cannot convert object to primitive value
    ```
2. `Date` å’Œ `Symbol` å¯¹è±¡æ˜¯å”¯ä¸€é‡å†™ `[Symbol.toPrimitive]()` æ–¹æ³•çš„å†…ç½® JS å¯¹è±¡ã€‚

**B. `valueOf()`**
é™¤äº†åŒ…è£…å¯¹è±¡ä»¥åŠè¦†å†™è¿‡ `valueOf` çš„å¯¹è±¡ï¼Œå‡è¿”å›å¯¹è±¡æœ¬èº«ã€‚**åŒ…è£…å¯¹è±¡è¿”å›å¯¹åº”åŸå§‹å€¼ã€‚** ç¤ºä¾‹ï¼š
```javascript
let obj = {};
obj.valueOf();  // {}

let s = new String('s');
s.valueOf();    // 's'
```

**C. `toSting()`**
è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥å¯¹è±¡å­—ç¬¦ä¸²ã€‚å…·ä½“å‚è€ƒ [JS å¤¯å®åŸºç¡€ - ç±»å‹åˆ¤æ–­]ã€‚


## 2. éšå¼ç±»å‹è½¬æ¢
éšå¼è½¬æ¢ä¸»è¦ä½“ç°åœ¨å„ç§æ“ä½œç¬¦è®¡ç®—ä¸­ï¼Œå¤§ä½“è§„åˆ™å¦‚ä¸‹ï¼š

#### åŠ æ³•è¿ç®—ç¬¦ `+`

åŠ æ³•æ“ä½œç¬¦æ˜¯éå¸¸ç‰¹æ®Šçš„ä¸€ç±»ï¼Œä¸ä»…è§„åˆ™ä¼—å¤šå°±è¿æ“ä½œç¬¦æœ¬èº«ä¹ŸåŒºåˆ†ä¸€å…ƒã€äºŒå…ƒä¸¤ç§æƒ…å†µå¤„ç†ã€‚

##### â… . ä½œä¸ºä¸€å…ƒæ“ä½œç¬¦

`+` ä½œä¸ºä¸€å…ƒæ“ä½œç¬¦æ—¶ä¸ `Number()` å‡½æ•°è¿›è¡Œç±»å‹è½¬æ¢è§„åˆ™ç›¸ä¼¼ï¼Œåªæœ‰ `BigInt` è½¬æ¢æœ‰åŒºåˆ«ï¼Œå…¶ä»–å®Œå…¨ç›¸åŒã€‚

è½¬æ¢çš„è§„åˆ™ä¸ºï¼š**1.1 `Number` `BigInt` å¼ºåˆ¶ç±»å‹è½¬æ¢**ã€‚

##### â…¡. ä½œä¸ºäºŒå…ƒæ“ä½œç¬¦

ä½œä¸ºäºŒå…ƒæ“ä½œç¬¦æ—¶ï¼Œæœ‰ä»¥ä¸‹è½¬æ¢è§„åˆ™ï¼Œ**è§„åˆ™ä¼˜å…ˆçº§ï¼šA > B > C > Dã€‚**

**A. ä¸¤ä¸ªæ“ä½œæ•°å…ˆè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹**
è¿™é‡Œçš„è§„åˆ™ç‰¹æŒ‡æ“ä½œæ•°æœ‰å¯¹è±¡ç±»å‹æ—¶å…ˆå°†å¯¹è±¡è¿›è¡Œ**åŸå§‹å€¼å¼ºåˆ¶è½¬æ¢ï¼ˆå³ 1.4ï¼‰ï¼Œ** åç»­ B\C\D è§„åˆ™éƒ½åœ¨**ä¸¤ä¾§æ“ä½œæ•°éƒ½æ˜¯åŸºæœ¬ç±»å‹**è¿™ä¸ªå‰æä¸‹ã€‚
```javascript
0 + {}      // '0[object Object]'
// å®é™…è¿ç®—é€»è¾‘å¦‚ä¸‹ï¼š
// {} æ—  [Symbol.toPrimitive]() æ–¹æ³•ï¼Œè·³è¿‡ç¬¬ä¸€æ­¥è½¬æ¢ï¼Œè¿›è¡Œç¬¬äºŒæ­¥è°ƒç”¨ valueOf()
0 + {}.valueOf();
// ğŸ‘‡
0 + {};
// ğŸ‘‡
0 + {}.toString();
// ğŸ‘‡ ï¼ˆæ­¤æ—¶è¿ç®—è§„åˆ™ç¬¦åˆ Bï¼Œè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼‰
0 + '[object Object]'; 
// ğŸ‘‡
'0[object Object]'
```

**æ³¨æ„ï¼šä¸åŒå¯¹è±¡è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°æ—¶è¿”å›å€¼å¯èƒ½ä¸åŒã€‚**
ä¾‹å¦‚ï¼š`Array` è°ƒç”¨ `toString()` å®é™…ä¸Šæ˜¯ `join()`ã€‚
```javascript
0 + []          // '0'
0 + [1,2,3]     // '01,2,3'
```
ä¾‹å¦‚ï¼š`Function` è°ƒç”¨ `toString()` è¿”å›æ˜¯å‡½æ•°æœ¬ä½“å­—ç¬¦ä¸²ã€‚
```javascript
0 + (() => {})    // '0() => {}'
```

**B. ä¸€ä¸ªæ“ä½œæ•°ç±»å‹ä¸º `String` åˆ™å¦ä¸€ä¸ªæ“ä½œæ•°è¿›è¡Œ `String` å¼ºåˆ¶è½¬æ¢ï¼ˆå³ 1.2ï¼‰ï¼Œç„¶åè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ã€‚å„ç§ä¸åŒæƒ…å†µå¦‚ä¸‹ç¤ºä¾‹ï¼š**
```javascript
'0' + 0             // '00'
'0' + {}            // '0[object Object]'
'0' + new Date()    // '0Mon Feb 06 2023 10:44:23 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)' ps: Date å¯¹è±¡ [Symbol.toPrimitive]() è¢«é‡å†™äº†
'0' + null          // '0null'
'0' + undefined     // '0undefined'
'0' + Infinity      // '0Infinity'
```
æ³¨æ„ï¼šæ­¤å¤„å¯¹è±¡è½¬æ¢è§„åˆ™æ˜¯åŸå§‹å€¼è½¬æ¢ï¼ˆè§„åˆ™ Aï¼‰è€Œé `String` å¼ºåˆ¶è½¬æ¢ï¼ˆå³ 1.2ï¼‰ã€‚éªŒè¯ï¼š
```javascript
let obj = {
    [Symbol.toPrimitive](hint){
        // æ­¤å¤„åˆ¤æ–­ä¸º defaultï¼Œä»£è¡¨æœŸæœ›è½¬æ¢åçš„åŸå§‹å€¼å¹¶ä¸æ˜¯ stringã€‚
        if(hint === 'default') return 'åŸå§‹å€¼è½¬æ¢ã€‚';
        // æ­¤å¤„åˆ¤æ–­ä¸º stringï¼Œä»£è¡¨æœŸæœ›è½¬æ¢åçš„åŸå§‹å€¼æ˜¯ string ç±»å‹ã€‚
        if(hint === 'string') return 'String å¼ºåˆ¶è½¬æ¢ã€‚';
    }
}
'å€¼ä¸ºï¼š' + obj  // 'å€¼ä¸ºï¼šåŸå§‹å€¼è½¬æ¢ã€‚'
```
```javascript
let obj = {
    valueOf(){
        return 'åŸå§‹å€¼è½¬æ¢ã€‚';
    },
    toString(){
        return 'String å¼ºåˆ¶è½¬æ¢ã€‚';
    }
};
'å€¼ä¸ºï¼š' + obj  // 'å€¼ä¸ºï¼šåŸå§‹å€¼è½¬æ¢ã€‚'
```

**C. ä¸€ä¸ªæ“ä½œæ•°ç±»å‹ä¸º `BigInt` å¦ä¸€ä¸ªä¸æ˜¯åˆ™æŠ¥é”™ `TypeError`ã€‚ä¸¤ä¸ªå‡ä¸º `BigInt` åˆ™æ‰§è¡ŒåŠ æ³•è¿ç®—ã€‚**

**D. ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œ `Number` `BigInt` å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆå³ 1.1 ï¼‰ï¼Œå†è¿›è¡Œç®—æ•°è¿ç®—ï¼Œå„ç§ä¸åŒæƒ…å†µå¦‚ä¸‹ç¤ºä¾‹ï¼š**
```javascript
0 + true                // 1 ps: true=>1 false=>0
0 + null                // 0
0 + undefined           // NaN ps: undefined=>NaN
0 + 'B'                 // '0B' ç¬¦åˆè§„åˆ™ Bï¼Œæ­¤å¤„æ‰§è¡Œå­—ç¬¦ä¸²æ‹¼æ¥
Symbol(1) + Symbol(1)   // Errorï¼Cannot convert a Symbol value to a number
//... å…¶ä»–æƒ…å†µå‚è€ƒ `Number` å¼ºåˆ¶è½¬æ¢ åçš„å€¼
```


#### ç®—æ•°è¿ç®—ç¬¦ `- * / %`

ä¸¤ä¸ªæ“ä½œæ•°å‡è¿›è¡Œ `Number` `BigInt` å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆå³ 1.1 ï¼‰ï¼Œå†è¿›è¡Œç®—æœ¯è¿ç®—ã€‚
```javascript
8 * true        // 8
0 * (()=>{})    // NaN
{} * {}         // NaN
// ...
```


#### ç›¸ç­‰æ“ä½œç¬¦ `== !=`
è§„åˆ™å‚è€ƒï¼š[MDN ç›¸ç­‰æ“ä½œç¬¦]ï¼Œä¸ç­‰ `!=` è½¬æ¢ç®—æ³•ç›¸åŒã€‚

**A. ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ç›¸åŒï¼š**
1. `Object`ï¼šä»…å½“å¼•ç”¨çš„å¯¹è±¡ä¸ºåŒä¸€ä¸ªæ‰è¿”å› `true`ã€‚
2. `Symbol`ï¼šä»…å½“å¼•ç”¨å€¼ç›¸åŒæ—¶è¿”å› `true`ã€‚æ³¨æ„ï¼šåˆ©ç”¨ `Symbol.for()` å‡½æ•°ç”Ÿæˆç›¸åŒå¼•ç”¨å€¼ã€‚
3. `String`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚
4. `Number`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚æ³¨æ„ä»¥ä¸‹ç‰¹æ®Šå€¼ï¼š
   ```javascript
    +0 == -0                // true
    Infinity == Infinity    // true
    NaN == ä»»ä½•å€¼            // false    
    ```
5. `Boolean`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚
6. `BigInt`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚
7. `null`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚
8. `undefined`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚

**B. `null`ã€`undefined`**
1. `null`ï¼šä»…ä¸æœ¬èº«ä»¥åŠ `undefined` è¿”å› `true`ã€‚
2. `undefined`ï¼šä»…ä¸æœ¬èº«ä»¥åŠ `null` è¿”å› `true`ã€‚

**C. ä¸€ä¸ªæ“ä½œæ•°ä¸ºå¯¹è±¡ç±»å‹**
1. å¦å¤–ä¸€ä¸ªä¹Ÿæ˜¯å¯¹è±¡ï¼Œè§„åˆ™å‚è€ƒ **1ã€‚**
2. å¦å¤–ä¸€ä¸ªæ“ä½œæ•°ä¸ºåŸºæœ¬ç±»å‹ï¼Œåˆ™å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹å†åšå¯¹æ¯”ã€‚è½¬æ¢è§„åˆ™å‚è€ƒï¼š**åŸå§‹å€¼å¼ºåˆ¶è½¬æ¢ï¼ˆå³ 1.4ï¼‰ã€‚**

**D. æ­¤æ—¶ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯åŸºæœ¬ç±»å‹**
1. ç±»å‹ç›¸åŒå‚è€ƒ Aã€‚
2. ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ä¸åŒï¼šä¸€ä¸ªæ“ä½œæ•°ç±»å‹ä¸º `Symbol`ï¼Œå‚è€ƒ Aã€‚
3. ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ä¸åŒï¼šä¸€ä¸ªæ“ä½œæ•°ç±»å‹ä¸º `Boolean`ï¼Œåˆ™æ­¤è½¬æ¢ä¸º `Number`ï¼Œå†è¿›è¡Œæ¯”è¾ƒã€‚
4. ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ä¸åŒï¼š`String` ä¸ `Number`ï¼Œ`String` å¼ºåˆ¶è½¬æ¢ä¸º `Number`ï¼ˆå³ 1.1ï¼‰ï¼Œåœ¨è¿›è¡Œæ¯”è¾ƒã€‚
5. ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ä¸åŒï¼š`String` ä¸ `BigInt`ï¼Œ`String` å¼ºåˆ¶è½¬æ¢ä¸º `BigInt`ï¼ˆå³ 1.1ï¼‰ï¼Œåœ¨è¿›è¡Œæ¯”è¾ƒã€‚
6. ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ä¸åŒï¼š`Number` ä¸ `BigInt`ï¼Œç›´æ¥æ¯”è¾ƒå¤§å°ã€‚


#### å…³ç³»æ“ä½œç¬¦ `< <= > >=`
è§„åˆ™å‚è€ƒï¼š[MDN å°äºæ“ä½œç¬¦]ï¼Œå…¶ä»–å…³ç³»æ“ä½œç¬¦å‚è€ƒæ­¤è§„åˆ™ã€‚

**A. `Object` ç±»å‹è¿›è¡Œ `Number` `BigInt` å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆå³ 1.1ï¼‰**
`[Symbol.toPrimitive](hint)` å‚æ•°ä¼ å…¥ `number`ï¼ŒæœŸæœ›è½¬æ¢åçš„åŸå§‹å€¼ä¸º `Number` ç±»å‹ã€‚

åç»­è§„åˆ™ä¸­æ“ä½œæ•°éƒ½ä¸ºåŸºæœ¬ç±»å‹ã€‚

**B. ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹å‡ä¸º `String` åˆ™æŒ‰ä½ï¼ˆä»å¤§åˆ°å°ï¼‰Unicode ç¼–ç å€¼ç¡®å®šå¤§å°ã€‚**
`charCodeAt(i)` å‡½æ•°è¿”å›å­—ç¬¦ä¸²ä½ç½® `i` å¤„ Unicode ç¼–ç å€¼ã€‚

**C. **

### å‚è€ƒ

1. [JavaScriptæ•°æ®ç±»å‹éšå¼è½¬æ¢](https://blog.csdn.net/m0_57135756/article/details/124024502)
2. [MDN ç›¸ç­‰ç¬¦](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Equality)

[Number å¼ºåˆ¶è½¬æ¢]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number#number_coercion

[String å¼ºåˆ¶è½¬æ¢]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#string_coercion

[BigInt å¼ºåˆ¶è½¬æ¢]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt#bigint_coercion

[Object å¼ºåˆ¶è½¬æ¢]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object#object_coercion

[MDN ç›¸ç­‰æ“ä½œç¬¦]: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Equality

[MDN å°äºæ“ä½œç¬¦]: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Less_than

[JS å¤¯å®åŸºç¡€ - ç±»å‹åˆ¤æ–­]: ./JS%20%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%20-%20%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/note.md#Object.prototype.toString.call()


