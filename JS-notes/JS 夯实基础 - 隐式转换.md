
# JS ç±»å‹è½¬æ¢

## ä¸€. å¼ºåˆ¶ç±»å‹è½¬æ¢

#### å¼ºåˆ¶åŸå§‹å€¼è½¬æ¢
å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºåŸå§‹ç±»å‹æ—¶ï¼Œä¼šæŒ‰ç…§ `[Symbol.toPrimitive]()` => `valueOf()` => `toString()` é¡ºåºè°ƒç”¨å‡½æ•°ï¼Œå…¶ä¸­ä¹‹ä¸€è¿”å›åŸå§‹ç±»å‹å€¼ååœæ­¢ã€‚

**A. `[Symbol.toPrimitive]()`**
å½“å¯¹è±¡éœ€è¦è½¬åŒ–ä¸ºåŸå§‹å€¼æ—¶ä¼˜å…ˆè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šè¢«ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° hintï¼Œè¡¨ç¤ºè¦è½¬æ¢åˆ°çš„åŸå§‹å€¼çš„é¢„æœŸç±»å‹ã€‚ï¼š
1. `'number'`ï¼šè½¬åŒ–ä¸º `Number` ç±»å‹ã€‚
2. `'string'`ï¼šè½¬åŒ–ä¸º `String` ç±»å‹ã€‚
3. `'default'`ï¼š`Number` `String` éƒ½å¯ä»¥ã€‚

**å½“å¯¹è±¡æœ‰æ­¤æ–¹æ³•æ—¶ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªåŸå§‹ç±»å‹å€¼ï¼Œå¦åˆ™æŠ¥é”™ï¼Œç¤ºä¾‹ï¼š**
```javascript
let obj = {
    [Symbol.toPrimitive](hint){
        return {};
    }
};
+obj    // Uncaught TypeError: Cannot convert object to primitive value
```
`Date` å’Œ `Symbol` å¯¹è±¡æ˜¯å”¯ä¸€é‡å†™ `[Symbol.toPrimitive]()` æ–¹æ³•çš„å†…ç½® JS å¯¹è±¡ã€‚


**B. `valueOf()`**
é™¤äº†åŒ…è£…å¯¹è±¡ä»¥åŠè¦†å†™è¿‡ `valueOf` çš„å¯¹è±¡ï¼Œå‡è¿”å›å¯¹è±¡æœ¬èº«ã€‚**åŒ…è£…å¯¹è±¡è¿”å›å¯¹åº”åŸå§‹å€¼ã€‚** ç¤ºä¾‹ï¼š
```javascript
let obj = {};
obj.valueOf();  // {}

let s = new String('s');
s.valueOf();    // 's'
```

**B. `toSting()`**
è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥å¯¹è±¡å­—ç¬¦ä¸²ã€‚å…·ä½“å‚è€ƒ [JS å¤¯å®åŸºç¡€ - ç±»å‹åˆ¤æ–­]ã€‚




**A. æœ‰é™è°ƒç”¨ **

https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures#%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2

## éšå¼ç±»å‹è½¬æ¢
éšå¼è½¬æ¢ä¸»è¦ä½“ç°åœ¨å„ç§æ“ä½œç¬¦è®¡ç®—ä¸­ï¼Œå¤§ä½“è§„åˆ™å¦‚ä¸‹ï¼š

#### å‰ç½®çŸ¥è¯†
**1. `Number` å¼ºåˆ¶è½¬æ¢**ï¼š

é¡¾åæ€ä¹‰ï¼Œå…¶ä»–ç±»å‹å¼ºåˆ¶è½¬æ¢ä¸º `Number` ç±»å‹ã€‚è§„åˆ™å‚è€ƒï¼š[Number å¼ºåˆ¶è½¬æ¢]

#### åŠ æ³•è¿ç®—ç¬¦ +

åŠ æ³•æ“ä½œç¬¦æ˜¯éå¸¸ç‰¹æ®Šçš„ä¸€ç±»ï¼Œä¸ä»…è§„åˆ™ä¼—å¤šå°±è¿æ“ä½œç¬¦æœ¬èº«ä¹ŸåŒºåˆ†ä¸€å…ƒã€äºŒå…ƒä¸¤ç§æƒ…å†µå¤„ç†ã€‚

##### â… . ä½œä¸ºä¸€å…ƒæ“ä½œç¬¦

`+` ä½œä¸ºä¸€å…ƒæ“ä½œç¬¦æ—¶ä¸ `Number()` å‡½æ•°è¿›è¡Œç±»å‹è½¬æ¢è§„åˆ™ç›¸ä¼¼ï¼Œåªæœ‰ `BigInt` è½¬æ¢æœ‰åŒºåˆ«ï¼Œå…¶ä»–å®Œå…¨ç›¸åŒã€‚

è½¬æ¢çš„è§„åˆ™ä¸ºï¼š**å‰ç½®çŸ¥è¯†ï¼š[Number å¼ºåˆ¶è½¬æ¢]**ã€‚

##### â…¡. ä½œä¸ºäºŒå…ƒæ“ä½œç¬¦

ä½œä¸ºäºŒå…ƒæ“ä½œç¬¦æ—¶ï¼Œæœ‰ä¸¤æ¡è½¬æ¢è§„åˆ™ï¼Œ**è§„åˆ™ A ä¼˜å…ˆçº§å¤§äº Bã€‚**

**A. ä¸€ä¾§æ•°æ®ç±»å‹ä¸º `String` åˆ™å¦å¤–ä¸€ä¾§ä¹Ÿè½¬æ¢ä¸º `String`ï¼Œç„¶åè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ã€‚å„ç§ä¸åŒæƒ…å†µå¦‚ä¸‹ç¤ºä¾‹ï¼š**
```javascript
'0' + 0         // '00'
'0' + 0         // '00'
'0' + {}        // '0[object Object]'
'0' + null      // '0null'
'0' + undefined // '0undefined'
'0' + Infinity  // '0Infinity'
```

**B. ä¸€ä¾§æ•°æ®ç±»å‹ä¸º `Number` åˆ™å¦å¤–ä¸€ä¾§ä¹Ÿå°†ç±»å‹è½¬æ¢ä¸º `Number` è¿›è¡Œç®—æ•°è¿ç®—ï¼Œå„ç§ä¸åŒæƒ…å†µå¦‚ä¸‹ç¤ºä¾‹ï¼š**

- å¯¹è±¡ï¼šå…ˆåè°ƒç”¨ `valueOf()`ã€`toString()` è·å–åŸå§‹å€¼ï¼Œè¿›è¡Œè¿ç®—ã€‚
    ```javascript
    0 + {}      // '0[object Object]'
    // å®é™…è¿ç®—é€»è¾‘å¦‚ä¸‹ï¼š
    0 + {}.valueOf();
    // ğŸ‘‡
    0 + {};
    // ğŸ‘‡
    0 + {}.toString();
    // ğŸ‘‡ ï¼ˆæ­¤æ—¶è¿ç®—è§„åˆ™ç¬¦åˆ Aï¼Œè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼‰
    0 + '[object Object]'; 
    // ğŸ‘‡
    '0[object Object]'
    ```

    **æ³¨æ„ï¼šä¸åŒå¯¹è±¡è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°æ—¶è¿”å›å€¼å¯èƒ½ä¸åŒã€‚**
    ä¾‹å¦‚ï¼š`Array` è°ƒç”¨ `toString()` å®é™…ä¸Šæ˜¯ `join()`ã€‚
    ```javascript
    0 + []          // '0'
    0 + [1,2,3]     // '01,2,3'
    ```
    ä¾‹å¦‚ï¼š`Function` è°ƒç”¨ `toString()` è¿”å›æ˜¯å‡½æ•°æœ¬ä½“å­—ç¬¦ä¸²ã€‚
    ```javascript
    0 + (() => {})    // '0() => {}'
    ```

- å…¶ä»–æ‰€æœ‰ç±»å‹æ‰§è¡Œ [Number å¼ºåˆ¶è½¬æ¢] å†è¿›è¡Œç®—æ•°è¿ç®—ï¼Œå„ç§ä¸åŒæƒ…å†µå¦‚ä¸‹ç¤ºä¾‹ï¼š
    ```javascript
    0 + true        // 1 ps: true=>1 false=>0
    0 + null        // 0
    0 + undefined   // NaN ps: undefined=>NaN
    0 + 'B'         // '0B' ç¬¦åˆè§„åˆ™ Aï¼Œæ­¤å¤„æ‰§è¡Œå­—ç¬¦ä¸²æ‹¼æ¥
    //... å…¶ä»–æƒ…å†µå‚è€ƒ `Number` å¼ºåˆ¶è½¬æ¢ åçš„å€¼
    ```

#### ç®—æ•°è¿ç®—ç¬¦ - * / %

ä¸¤ä¸ªæ“ä½œæ•°å‡ `Number` å¼ºåˆ¶è½¬æ¢ï¼Œå†è¿›è¡Œç®—æœ¯è¿ç®—ã€‚
```javascript
8 * true        // 8
0 * (()=>{})    // NaN
{} * {}         // NaN
// ...
```

#### ç›¸ç­‰è¿ç®—ç¬¦ ==

è§„åˆ™å‚è€ƒï¼š[MDN ç›¸ç­‰è¿ç®—ç¬¦]

**1. ä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ç›¸åŒï¼š**
1. `Object`ï¼šä»…å½“å¼•ç”¨çš„å¯¹è±¡ä¸ºåŒä¸€ä¸ªæ‰è¿”å› `true`ã€‚
2. `Symbol`ï¼šä»…å½“å¼•ç”¨å€¼ç›¸åŒæ—¶è¿”å› `true`ã€‚æ³¨æ„ï¼šåˆ©ç”¨ `Symbol.for()` å‡½æ•°ç”Ÿæˆç›¸åŒå¼•ç”¨å€¼ã€‚
3. `String`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚
4. `Number`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚æ³¨æ„ä»¥ä¸‹ç‰¹æ®Šå€¼ï¼š
   ```javascript
    +0 == -0                // true
    Infinity == Infinity    // true
    NaN == ä»»ä½•å€¼            // false    
    ```
5. `Boolean`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚
6. `BigInt`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚
7. `null`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚
8. `undefined`ï¼šå€¼ç›¸åŒè¿”å› `true`ã€‚

**2. nullã€undefined**
1. `null`ï¼šä»…ä¸æœ¬èº«ä»¥åŠ `undefined` è¿”å› `true`ã€‚
2. `undefined`ï¼šä»…ä¸æœ¬èº«ä»¥åŠ `null` è¿”å› `true`ã€‚

**3. ä¸€ä¸ªæ“ä½œæ•°ä¸ºå¯¹è±¡ç±»å‹**
1. å¦å¤–ä¸€ä¸ªä¹Ÿæ˜¯å¯¹è±¡ï¼Œè§„åˆ™å‚è€ƒ **Aã€‚**
2. å¦å¤–ä¸€ä¸ªæ“ä½œæ•°ä¸ºåŸºæœ¬ç±»å‹ï¼Œåˆ™å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹å†åšå¯¹æ¯”ã€‚è½¬æ¢æ–¹æ³•å‚è€ƒï¼š**ä¸€. å¼ºåˆ¶ç±»å‹è½¬æ¢**ã€‚

**4. å½“å‰æ­¥éª¤**



### å‚è€ƒ

1. [JavaScriptæ•°æ®ç±»å‹éšå¼è½¬æ¢](https://blog.csdn.net/m0_57135756/article/details/124024502)
2. [MDN ç›¸ç­‰ç¬¦](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Equality)

[Number å¼ºåˆ¶è½¬æ¢]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number#number_coercion
[MDN ç›¸ç­‰è¿ç®—ç¬¦]: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Equality
[JS å¤¯å®åŸºç¡€ - ç±»å‹åˆ¤æ–­]: ./JS%20%E5%A4%AF%E5%AE%9E%E5%9F%BA%E7%A1%80%20-%20%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/note.md#Object.prototype.toString.call()


